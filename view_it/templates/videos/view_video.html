{% extends "base.html" %}
{% if object.status == "private" and request.user.username != object.user.username %}
    {% comment "raise 403 error" %}
    {% load 'django.views.defaults' %}
    {% now "403" as permission_denied %}
    {% include "403.html" %}
    {% endcomment %}
{% endif %}
{% load static i18n %}

{% block title %}{{ object.title }}{% endblock %}

{% block content %}

    <section class="bg-dark rounded">
        <div class="embed-responsive embed-responsive-16by9 ratio ratio-16x9 m-0">
          {% if object.thumbnail %}
            <video class="embed-responsive-item w-100" allowfullscreen controls preload="none" poster="{{ object.thumbnail.url }}">
          {% else %}
            <video class="embed-responsive-item w-100" allowfullscreen controls>
          {% endif %}
              <source src="{{ object.file.url }}">
          </video>
        </div>
    </section>

    <section class="bg-white">
      <div class="d-flex flex-column justify-content-center w-100">
        <div class="m-4 d-flex flex-wrap flex-row justify-content-between align-items-center text-center">
          <div class="d-flex flex-column justify-content-center align-items-start text-center">
            <p class="lead m-0">{{ object.title }}</p>
            <span>Uploaded by: <a class="text-decoration-none text-dark" href="{% url 'users:detail' object.user.username %}">@{{ object.user.username }}</a></span>
            <small class="text-muted">{{ object.uploaded_timestamp|timesince }} ago</small>
          </div>
          {% if object.user and object.user.id == request.user.id%}
            <div>
              <a class="btn btn-primary font-weight-bold" href="{% url 'videos:update' object.url_slug %}" role="button">{% translate "Update Details" %}</a>
            </div>
          {% else %}
            <div>
              <a class="btn btn-danger font-weight-bold" href="" role="button"><i class="fa-solid fa-bell"></i> {% translate "Subscribe!" %}</a>
            </div>
          {% endif %}
        </div>
      </div>
      {% if object.description %}
      <div class="accordion accordion-flush p-4 mb-4" id="accordionFlushExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="flush-headingOne">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
              <span class="text-truncate">{{object.description}}</span>
            </button>
          </h2>
          <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
            <div class="accordion-body">
              <p class="lead">{{ object.description|linebreaksbr }}</p>
            </div>
          </div>
        </div>
      </div>
      {% endif %}
    </section>

{% endblock content %}
